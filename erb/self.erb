@SELF_CHECK

;自慰中毒による自慰チェック
A = 0

IF ABL:10 == 1
	A = 1
ELSEIF ABL:10 == 2
	A = 2
ELSEIF ABL:10 == 3
	A = 4
ELSEIF ABL:10 == 4
	A = 6
ELSEIF ABL:10 == 5
	A = 9
ENDIF

IF ABL:1 == 4 && ABL:3 >= 4 && PALAM:5 >= PALAMLV:4
	A += 1
ELSEIF ABL:1 == 5 && ABL:3 >= 4 && PALAM:5 >= PALAMLV:4
	A += 2
ENDIF

;自慰しやすい
IF TALENT:60
	A *= 2
	;欲望ＬＶ３でもAに+1する
	SIF ABL:1 == 3 && ABL:3 >= 3 && PALAM:5 >= PALAMLV:3
		A += 1
ENDIF

;快感に素直、快感の否定
IF TALENT:70 && A
	A += 1
ELSEIF TALENT:71 && A
	A -= 2
ENDIF

IF A > 0
	PRINT 調教終了後に
	PRINTV A
	PRINTL 回自慰をしたようだ。
	PRINTFORML %EXPNAME:10%＋{A}
	PRINTFORML %PALAMNAME:0%の珠＋{A*500}
	PRINTFORML %PALAMNAME:4%の珠＋{A*100}
	PRINTFORMW %PALAMNAME:5%の珠＋{A*250}
	EXP:10 += A
	JUEL:0 += A*500
	JUEL:4 += A*100
	JUEL:5 += A*250

	IF ABL:0+ABL:7+ABL:8 >= 10
		PRINTFORML そのことを%NAME%は報告した。
		PRINTFORML %PALAMNAME:8%の珠＋{A*200}
		JUEL:8 += A*200
	ENDIF
ENDIF


;レズ中毒によるレズチェック
SIF ASSI < 0
	RETURN 0

;オトコはだめ
SIF TALENT:122 || TALENT:ASSI:122
	RETURN 0

;一定能力必要
SIF ABL:9 < 2 || ABL:3 < 3 || ABL:0 < 2 || ABL:1 < 2
	RETURN 0
;レズ中毒必要
SIF ABL:12 == 0 && ABL:ASSI:12 == 0
	RETURN 0
;体力必要
SIF BASE:0 < 500
	RETURN 0

N = 0
IF ABL:12 == 1
	N += 1
ELSEIF ABL:12 == 2
	N += 2
ELSEIF ABL:12 == 3
	N += 3
ELSEIF ABL:12 == 4
	N += 5
ELSEIF ABL:12 == 5
	N += 7
ENDIF
IF ABL:ASSI:12 == 1
	N += 1
ELSEIF ABL:ASSI:12 == 2
	N += 2
ELSEIF ABL:ASSI:12 == 3
	N += 5
ELSEIF ABL:ASSI:12 == 4
	N += 8
ELSEIF ABL:ASSI:12 == 5
	N += 13
ENDIF

IF RELATION:ASSI > 0
	N *= RELATION:ASSI
	N /= 100
ENDIF

PRINTFORML 調教後{N}回レズプレイをしたようだ。
PRINTFORML %EXPNAME:40%経験＋{N*20}
SIF N*100*ABL:0/500 > 0
	PRINTFORML %EXPNAME:2%経験＋{N*100*ABL:0/500}
PRINTFORML %PALAMNAME:0%の珠＋{N*100*ABL:0}
PRINTFORML %PALAMNAME:5%の珠＋{N*200}

EXP:40 += N*20
EXP:2 += N*100*ABL:0/500

JUEL:0 += N*100*ABL:0
JUEL:5 += N*200
IF TALENT:ASSI:121
	PRINTFORML %EXPNAME:20%経験＋{N}
	PRINTFORML %PALAMNAME:6%の珠＋{N*100*(ABL:2+ABL:6)}
	PRINTFORML %PALAMNAME:7%の珠＋{N*100*(ABL:2+ABL:6)}

	EXP:20 += N
	JUEL:6 += N*100*(ABL:2+ABL:6)
	JUEL:7 += N*100*(ABL:2+ABL:6)
ELSE
	PRINTFORML %PALAMNAME:6%の珠＋{N*50*(ABL:2+ABL:6)}
	PRINTFORML %PALAMNAME:7%の珠＋{N*50*(ABL:2+ABL:6)}

	JUEL:6 += N*50*(ABL:2+ABL:6)
	JUEL:7 += N*50*(ABL:2+ABL:6)
ENDIF
IF TALENT:ASSI:83
	PRINTFORML %EXPNAME:30%経験＋{N}
	SIF N*100*ABL:8 > 0
		PRINTFORML %PALAMNAME:9%の珠＋{N*100*ABL:8}

	JUEL:9 += N*100*ABL:8
	EXP:30 += N
ENDIF
IF TALENT:121
	PRINTFORML %EXPNAME:3%経験＋{N}
	PRINTFORML %PALAMNAME:8%の珠＋{N*100}

	EXP:3 += N
	JUEL:8 += N*100
ENDIF

WAIT
